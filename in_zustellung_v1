type: markdown
content: |-
  ## <center> Pakete in Zustellung
  ***
  {% if states.sensor.seventeentrack_packages_in_transit.attributes.packages %}
    {% for package in states.sensor.seventeentrack_packages_in_transit.attributes.packages %}
      **{{ package.friendly_name }} ({{ package.tracking_number }}):** {{ states('sensor.seventeentrack_packages_in_transit')|from_json|default("")|from_json|selectattr('tracking_number', 'equalto', package.tracking_number)|map(attribute='info_text')|list|first|default('Status unbekannt')|
      replace("The shipment has been loaded onto the delivery vehicle", "Die Sendung wurde in das Zustellfahrzeug geladen.")|
      replace("The shipment has been processed in the parcel center of origin", "Die Sendung wurde im Ursprungspaketzentrum bearbeitet.")|
      replace("The shipment arrived in the region of recipient and will be transported to the delivery base in the next step", "Die Sendung ist in der Empfängerregion angekommen und wird im nächsten Schritt zur Zustellbasis transportiert.")|
      replace("Pick-up was successful", "Die Sendung wurde abgeholt.")|
      replace("The shipment has been posted by the sender at the retail outlet", "Die Sendung wurde vom Absender in der Filiale eingeliefert.")|
      replace("The instruction data for this shipment have been provided by the sender to DHL electronically", "Die Auftragsdaten für diese Sendung wurden vom Absender elektronisch an DHL übermittelt.")|
      replace("Departed from facility", "Einrichtung verlassen.")|
      replace("The parcel data was entered into GLS IT system; the parcel was not yet handed over to GLS", "Die Paketdaten wurden in das IT-System von GLS eingegeben; das Paket wurde noch nicht an GLS übergeben.")|
      escape}} am {{ as_timestamp(package.timestamp) | timestamp_custom('%d.%m.%y %H:%M') }} Uhr.
      ***
    {% endfor %}
  {% else %}
    Keine Pakete.
  {% endif %}
