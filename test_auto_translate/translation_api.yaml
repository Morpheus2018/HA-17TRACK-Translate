translation_api:

    homeassistant:

    input_select:
      language:
        name: Language
        options:
          - en
          - de
          - es
          - fr
        initial: de
        icon: mdi:earth

    sensor:
      - platform: rest
        name: deepl_translation
        resource: https://api-free.deepl.com/v2/translate
        method: POST
        headers:
          Content-Type: application/x-www-form-urlencoded
        payload: >
          {%- set auth_key = 'YOUR_DEEPL_AUTH_KEY' -%}
          {%- set target_lang = translations.get(lang, 'en') -%}
          {%- set payload = {"auth_key": auth_key, "text": "{{ text }}", "target_lang": target_lang } -%}
          {{ payload | urlencode }}
        json_attributes:
          - translations
        json_attributes_path: "$.translations.*.text"
        value_template: "{{ value_json.translations[0].text }}"



#    sensor:
#      - platform: deepl_translation
#        name: My DeepL Translation
#        api_key: YOUR_API_KEY #!secret deepl_apikey
#        source_language: auto
#        target_language: de
#        text: "Hallo Welt."

#    sensor:
#      - platform: rest
#        name: deepl_translation
#        scan_interval: 3600 # optional, setzt das Intervall in Sekunden, in dem der Sensor aktualisiert wird
#        resource: https://api-free.deepl.com/v2/translate
#        method: POST
#        headers:
#          Content-Type: application/x-www-form-urlencoded
#        payload: "auth_key=YOUR_DEEPL_AUTH_KEY&text={{ text }}&target_lang={{ target_lang }}"
#        value_template: '{{ value_json.translations[0].text }}'
#        json_attributes:
#          - translations
#        json_attributes_path: "$.translations"
#        json_attributes_template: >-
#          {% set attributes = [] %}
#          {% for translation in value_json.translations %}
#            {% set attribute = { "detected_source_language": translation.detected_source_language } %}
#            {% set _ = attribute.update(translation) %}
#            {% set _ = attributes.append(attribute) %}
#          {% endfor %}
#          {{ attributes }}


